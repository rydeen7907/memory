# メモリ解放ツール (Memory Cleaner)

Python (Tkinter) で作成された、メモリとCPUの使用状況を監視し、不要なメモリを解放するためのデスクトップアプリケーションです。

![アプリケーションのスクリーンショット](https-placeholder-for-screenshot)
*(ここにスクリーンショットを挿入)*

## 主な機能

- **リアルタイム監視:**
    - メモリとCPUの現在の使用率をプログレスバーとパーセンテージで表示します。
    - 過去60秒間の使用率の推移をグラフで視覚化します。
- **メモリ解放:**
    - **手動解放:** 「今すぐメモリを解放」ボタンで、いつでもメモリをクリーンアップできます。
    - **自動解放:** 設定した時間間隔（分単位）で、定期的にメモリを自動で解放します。
- **プロセス監視:**
    - メモリ使用量が多い上位3プロセスを表示します。
    - CPU使用率が高い上位3プロセスを表示します。
- **便利なUI機能:**
    - **タスクトレイ格納:** ウィンドウを最小化するとタスクトレイに格納され、バックグラウンドで動作します。トレイアイコンには現在のメモリ使用率が簡易的に表示されます。
    - **警告表示:** メモリ使用率が設定した閾値を超えると、ウィンドウの背景色が変わり警告します。
    - **最前面表示:** ウィンドウを常に他のウィンドウより手前に表示するオプションがあります。
- **Windows連携:**
    - **スタートアップ登録:** Windowsの起動時にアプリを自動で実行するように設定できます。「最小化状態で起動」オプションも利用可能です。
    - **タスクマネージャー起動:** ボタン一つでOSのタスクマネージャー（またはそれに準ずるツール）を起動できます。

## 動作環境

- **OS:** Windows 10/11 (全機能) / macOS, Linux (一部機能制限あり)
- **Python:** 3.7以上
- **必要なライブラリ:**
    - `psutil`
    - `pystray`
    - `Pillow`

## インストールと実行

1.  **リポジトリをクローンまたはダウンロードします。**

2.  **必要なライブラリをインストールします。**
    ターミナルまたはコマンドプロンプトで、プロジェクトディレクトリに移動し、以下のコマンドを実行してください。
    ```bash
    pip install psutil pystray Pillow
    ```

3.  **アプリケーションを実行します。**
    ```bash
    python memory_cleaner.py
    ```

### 起動オプション

-   `--minimized`: アプリケーションを起動と同時にタスクトレイに格納します。
    ```bash
    python memory_cleaner.py --minimized
    ```
    このオプションは、主にWindowsのスタートアップ登録と組み合わせて使用することを想定しています。

## 使い方

### メインウィンドウ

-   **メモリ/CPU使用率:** 現在の使用状況が表示されます。
-   **グラフ:** 過去60秒間の使用率の推移です。メモリは青系の線、CPUはオレンジの線で表示されます。
-   **トップ3プロセス:** 現在リソースを最も消費しているプロセスが表示され、パフォーマンスのボトルネックを特定するのに役立ちます。
-   **今すぐメモリを解放:** クリックすると、Pythonのガベージコレクションと、システム（Windowsの場合）のワーキングセットのクリーンアップが実行されます。
-   **タスクマネージャー:** OS標準のタスク管理ツールを起動します。
-   **設定:** 設定ウィンドウを開きます。

### 設定ウィンドウ

-   **一般:**
    - `常に最前面で表示`: チェックを入れると、ウィンドウが常に一番手前に表示されます。
-   **起動設定 (Windowsのみ):**
    - `Windows起動時に実行`: PC起動時にこのアプリを自動実行します。
    - `最小化状態で起動`: スタートアップ時にウィンドウを表示せず、タスクトレイに直接格納します。
-   **自動解放と警告:**
    - `警告閾値(%)`: この値を超えるとウィンドウの背景色が変わり、警告状態になります。
    - `定期解放の間隔(分)`: 自動でメモリを解放する間隔を分単位で設定します。
    - `定期解放を開始/停止`: 上記で設定した間隔での自動解放を開始または停止します。

### タスクトレイ

-   ウィンドウを最小化すると、タスクトレイにアイコンが格納されます。
-   アイコンを右クリックするとメニューが表示されます。
    - `開く`: ウィンドウを再表示します。
    - `今すぐメモリを解放`: ウィンドウを表示せずにメモリ解放を実行します。
    - `タスクマネージャー`: タスクマネージャーを起動します。
    - `終了`: アプリケーションを完全に終了します。

## 設定ファイル (`config.json`)

初回起動時、または設定変更時に `config.json` というファイルが自動的に作成・更新されます。このファイルにはUIで設定した内容が保存されます。

```json
{
    "warning_threshold": "80",
    "auto_free_interval": "30",
    "topmost": false,
    "start_minimized": false
}
```

## ビルド (EXE化)

このスクリプトは PyInstaller を使って単一の実行可能ファイル（`.exe`）に変換することができます。

```bash
# app_icon.ico が同じディレクトリにあることを確認してください
pyinstaller --onefile --windowed --icon=app_icon.ico memory_cleaner.py
```

## ライセンス

このプロジェクトは MIT License の下で公開されています。